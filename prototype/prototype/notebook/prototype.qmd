---
title: "The Geography of Climate Discourses"
format: 
  html:
    code-fold: false
execute:
  message: false
  warning: false
---

Our objective is to capture climate discourses from social networks and understand mindframes on climate change by geography.

To accomplish this, we will use the following design.
![Prototype Design](images/prototype_design.png)

- We will have a database that holds the configurations about the media feeds and social networks to scrape.
- We then have 2 data products that are responsible for collecting and exposing media articles and social network conversations.
- Finally, we will have an AI agent that will analyze the conversations and classify them into 4 discourse types.

This notebook is a prototype of that design, a proof of concept to show how we can leverage the data we collected to understand climate discourses by geography.

## Theoretical Framework
Let's first talk about the theoretical framework we are using to classify the discourses.

We will be referring to the [Climate and Society](https://www.amazon.com/Climate-Society-Transforming-Future-Leichenko/dp/0745684394) book by Robin Lecheinko and Karen Oâ€™Brien.

In this book, the authors propose a framework to understand the different discourses on climate change. They identify 4 main discourses:

1. **Biophysical**: "Climate change is an environmental problem caused by rising concentrations of greenhouse gases from human activities. Climate change can be addressed through policies, technologies, and behavioural changes that reduce greehouse gas emissions and support adaptation."
2. **Critical**: "Climate change is a social problem caused by economic, political, and cultureal procsses that contribute to uneven and unsustainable patterns of development and energy usage. Addressing climate change requires challenging economic systems and power structures that perpetuate high levels of fossil fuel consumption."
3. **Dismissive**: "Climate change is not a problem at all or at least not an urgent concern. No action is needed to address climate change, and other issues should be prioritized."
4. **Integrative**: "Climate change is an environmental and social problem that is rooted in particular beliefs and perceptions of human-environment relationships and humanity's place in the world. Addressing climate change requires challenging mindsets, norms, rules, institutions, and policies that support unsustainable resource use and practice."

We will use this framework to classify the discourses we collect from social networks.

## Data
Back in early 2024, we collected conversations from X that discussed climate-related articles from the New York Times.

- The data spans from Mars 28, 2024 to May 30.
- During that time, we collected 655 articles, 7164 conversations and 7974 posts.
- Those posts came from 6578 users.
- Of those users, we were able to geolocate 3005 of them.
- That gives us 2071 posts with geolocation data for the users.
- Of those posts, we have 1380 posts geolocated in the United States.

```{r}
#| echo: false
#| results: hide
library(reticulate)
library(dplyr)
library(ggplot2)
library(knitr)

virtualenv_path <- system("poetry env info --path", intern = TRUE)
use_virtualenv(virtualenv_path, required = TRUE)

base::setwd("~/dev/climate_resilience/prototype/prototype/notebook/")
```

Let's load that sample data.

```{r}
conversations_df <- read.csv("../data/climate_conversations.csv")
```

And have a glimpse at the first few rows.
```{r}
kable(head(conversations_df, n=5))
```

## Climate Conversations
The conversations can sometime diverge from the original intent. Meaning that not all conversations end up being about climate change. So we used an AI agent to classify which conversations were indeed about climate change.

<details>
<summary>See code</summary>
```python
  #...
```
</details>

Let's see the results of that classification.

```{r}
conversation_classifications <- read.csv("../data/conversation_classifications.csv")
```

Let's visualize the distribution of conversations that are about climate change.

```{r}
conversation_classifications %>%
  count(classification) %>%
  kable()
```

We end up with 153 geolocated conversations about climate change. Let's start associating their posts to discourses and map which discourses dominates per region.

## Discourses
In a [previous initiative](https://blog.republicofdata.io/enforcing-structure-and-assembling-our-ai-agent-2/), we had developed an AI agent that could associate narratives to posts within a conversation. 

For reference, we are only pasting here the code we used to classify our posts. This is a non-executable cell, as it does require heavy and costly interactions with the OpenAI API. Please refer to that article above for implementation details. 

<details>
<summary>See code</summary>
```python
  #...
```
</details>

Let's now load the narratives we classified.

## Map
Hex map of which of the 4 discourse types are most prevalent by geography
